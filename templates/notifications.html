{% extends 'layout.html' %}
{% block main %}
    <div class="container">
        {% if messages %}
            <!-- Error messages -->
            {% for message in messages %}
                <div class="alert alert-{% if message.tags == 'error' %}danger{% else %}{{ message.tags }}{% endif %} alert-dismissible fade show" role="alert">
                    <span>{{ message }}</span>
                    <button type="button" class="btn-close border" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %}
        <div class="display-6 text-center my-1 text-truncate">
            Pending Questions
        </div>
        {% for notification in notifications %}
            <div class="row mb-2 py-2 mx-1 mx-sm-0 rounded border">
                <div class="col-12 col-sm-8 col-md-9 col-lg-10 text-truncate">
                    {{ notification.notifier.username }} {{ notification.message }} {{ notification.category.name }}
                </div>
                <div class="col-12 col-sm-4 col-md-3 col-lg-2 text-end">
                    <a class="btn btn-primary btn-sm" data-bs-toggle="collapse" href="#collapseQuestion{{ notification.question.id }}" role="button" aria-expanded="false" aria-controls="collapseQuestion">View</a>
                    <a class="btn btn-primary btn-sm" href="{% url 'Test:approve-question' %}?notification_id={{ notification.id }}&quesiton_id={{ notification.question.id }}">Approve</a>
                </div>
                <div class="collapse col-12 text-truncate" id="collapseQuestion{{ notification.question.id }}">
                    {{ notification.question.statement }}
                    <ol style="list-style-type: lower-alpha;">
                        {% if notification.question.options %}
                            {% for option in notification.question.options.all %}
                                <li>
                                    {% if option.correct %}
                                        <b>{{ option }}</b>
                                    {% else %}
                                        {{ option }}
                                    {% endif %}
                                </li>
                            {% endfor %}
                        {% endif %}
                    </ol>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock main %}
